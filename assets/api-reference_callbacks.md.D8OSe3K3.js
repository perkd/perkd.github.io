import{C as s,c as n,o,j as t,G as i,at as l,a,k as p}from"./chunks/framework.d1VjXUMH.js";const c="3.0.3",d={title:"Perkd Callbacks API",version:"1.0.0",description:"Webhook callbacks that Perkd sends to partner systems during machine operations."},m=[{url:"https://partner-api.example.com",description:"Partner callback server (example)"}],u={"/callbacks/checkin":{post:{operationId:"checkinCallback",summary:"Check-In Callback",description:"Called when a user checks in at a machine. Partner should validate user and return available items.",tags:["Callbacks"],requestBody:{required:!0,content:{"application/json":{schema:{type:"object",properties:{eventType:{type:"string",enum:["checkin"]},machineId:{type:"string"},personId:{type:"string"},timestamp:{type:"string",format:"date-time"}}}}}},responses:{200:{description:"Check-in validated",content:{"application/json":{schema:{type:"object",properties:{authorized:{type:"boolean"},person:{type:"object",properties:{personId:{type:"string"},name:{type:"string"},membership:{type:"object",properties:{level:{type:"string"},benefits:{type:"array",items:{type:"string"}}}}}}}}}}}}}},"/callbacks/order":{post:{operationId:"orderCallback",summary:"Order Callback",description:"Called when an order is created. Partner should validate and confirm the order.",tags:["Callbacks"],requestBody:{required:!0,content:{"application/json":{schema:{type:"object",properties:{eventType:{type:"string",enum:["order"]},orderId:{type:"string"},personId:{type:"string"},items:{type:"array",items:{type:"object",properties:{itemId:{type:"string"},quantity:{type:"integer"},price:{type:"number"}}}},totalAmount:{type:"number"},timestamp:{type:"string",format:"date-time"}}}}}},responses:{200:{description:"Order validated and confirmed",content:{"application/json":{schema:{type:"object",properties:{confirmed:{type:"boolean"},partnerOrderId:{type:"string",description:"Partner's internal order reference"}}}}}}}}},"/callbacks/authorize":{post:{operationId:"authorizeCallback",summary:"Payment Authorization Callback",description:"Called to authorize payment before order fulfillment.",tags:["Callbacks"],requestBody:{required:!0,content:{"application/json":{schema:{type:"object",properties:{eventType:{type:"string",enum:["authorize"]},orderId:{type:"string"},amount:{type:"number"},paymentMethod:{type:"string"}}}}}},responses:{200:{description:"Payment authorized",content:{"application/json":{schema:{type:"object",properties:{authorized:{type:"boolean"},authorizationId:{type:"string"}}}}}}}}}},h={securitySchemes:{webhookSignature:{type:"apiKey",in:"header",name:"X-Perkd-Signature",description:"HMAC signature for webhook verification"}}},b=[{webhookSignature:[]}],k={openapi:c,info:d,servers:m,paths:u,components:h,security:b},C=JSON.parse('{"title":"Callbacks API Reference","description":"","frontmatter":{"aside":false,"outline":"deep"},"headers":[],"relativePath":"api-reference/callbacks.md","filePath":"api-reference/callbacks.md"}'),y={name:"api-reference/callbacks.md"},v=Object.assign(y,{setup(g){return(f,e)=>{const r=s("CustomOASpec");return o(),n("div",null,[e[0]||(e[0]=t("h1",{id:"callbacks-api-reference",tabindex:"-1"},[a("Callbacks API Reference "),t("a",{class:"header-anchor",href:"#callbacks-api-reference","aria-label":'Permalink to "Callbacks API Reference"'},"​")],-1)),e[1]||(e[1]=t("p",null,"This page provides complete documentation for webhook callbacks that Perkd sends to partner systems.",-1)),e[2]||(e[2]=t("div",{class:"warning custom-block"},[t("p",{class:"custom-block-title"},"Partner Implementation Required"),t("p",null,[a("These are endpoints that "),t("strong",null,"you"),a(" (the partner) must implement on your server. Perkd will send HTTP POST requests to these URLs during machine operations.")])],-1)),i(r,{spec:p(k)},null,8,["spec"]),e[3]||(e[3]=l('<h2 id="implementation-guide" tabindex="-1">Implementation Guide <a class="header-anchor" href="#implementation-guide" aria-label="Permalink to &quot;Implementation Guide&quot;">​</a></h2><p>When implementing callback endpoints:</p><ol><li><strong>Verify Webhook Signatures</strong> - Use the <code>X-Perkd-Signature</code> header to validate requests</li><li><strong>Respond Quickly</strong> - Return responses within 5 seconds to avoid timeouts</li><li><strong>Handle Retries</strong> - Perkd will retry failed callbacks up to 3 times</li><li><strong>Use HTTPS</strong> - All callback URLs must use HTTPS in production</li></ol><h2 id="additional-resources" tabindex="-1">Additional Resources <a class="header-anchor" href="#additional-resources" aria-label="Permalink to &quot;Additional Resources&quot;">​</a></h2><ul><li><a href="/machines/callbacks/">Callbacks Overview</a></li><li><a href="/guides/webhooks.html">Webhooks Best Practices</a></li><li><a href="/guides/testing.html">Testing Callbacks</a></li></ul><h2 id="need-help" tabindex="-1">Need Help? <a class="header-anchor" href="#need-help" aria-label="Permalink to &quot;Need Help?&quot;">​</a></h2><p>If you have questions about implementing callback endpoints:</p><ol><li>Review the <a href="/guides/webhooks.html">Webhooks Best Practices Guide</a></li><li>Check the <a href="/guides/testing.html">Testing Guide</a></li><li>Contact support at <a href="mailto:support@perkd.com" target="_blank" rel="noreferrer">support@perkd.com</a></li></ol>',8))])}}});export{C as __pageData,v as default};
